<script>
    // Constants for pagination
    const rowsPerPage = 50;
    let currentPage = 1;

    fetch('data/phd_advisor_tree.json')
        .then(response => response.json())
        .then(data => {
            const totalPages = Math.ceil(data.length / rowsPerPage);
            const tableBody = document.querySelector('#advisorTable tbody');

            function renderPage(page) {
                tableBody.innerHTML = ''; // Clear current rows
                const start = (page - 1) * rowsPerPage;
                const end = page * rowsPerPage;
                const pageData = data.slice(start, end);

                pageData.forEach(row => {
                    const tr = document.createElement('tr');
                    const fileName = row['Senior Advisor'].replace('~', '');
                    
                    tr.innerHTML = `
                        <td>${row['Senior Advisor']}</td>
                        <td>${row['Tree Size']}</td>
                        <td>${row['Tree Depth']}</td>
                        <td><a href="data/visualisations/${fileName}_tree.html">View Tree</a></td>
                    `;
                    
                    tableBody.appendChild(tr);
                });
            }

            function createPaginationControls() {
                const paginationContainer = document.createElement('div');
                paginationContainer.style.textAlign = 'center';
                paginationContainer.style.marginTop = '10px';

                for (let i = 1; i <= totalPages; i++) {
                    const button = document.createElement('button');
                    button.textContent = i;
                    button.style.margin = '0 5px';
                    button.style.padding = '5px 10px';
                    button.style.cursor = 'pointer';

                    if (i === currentPage) {
                        button.style.backgroundColor = '#4CAF50';
                        button.style.color = 'white';
                        button.disabled = true;
                    }

                    button.addEventListener('click', () => {
                        currentPage = i;
                        renderPage(currentPage);
                        document.querySelector('.pagination-controls').remove();
                        createPaginationControls();
                    });

                    paginationContainer.appendChild(button);
                }

                paginationContainer.className = 'pagination-controls';
                document.querySelector('.container').appendChild(paginationContainer);
            }

            renderPage(currentPage);
            createPaginationControls();
        })
        .catch(error => {
            console.error('Error loading the JSON file:', error);
        });
</script>
